# spec_id: 5
## status: новый / в работе
Нужен новый скрипт process_pipe_song.sh, который будет генератор песен по заданному пайплайну пример @pipelines_vd/mozg
Он похож на process_manim_song.sh но более универсален и может использовать не только с маним, но и с другими пайплайнами.
Принимает на вход: путь к пайплайну
Делает следующие шаги:
1 используя fzf позволяет выбрать текстовый файл из пайплайна для создания по нему текста для песни


# spec_id: 4
## status: отложено
1 Нужно добавить в анализ второй транскрибации вопросы, чтобы они появились в оглавлении  
2 Нужно зациклить фазу создания html после второй транскрибации нахождения оглавления context, т.к. могут быть ошибки чтобы пользователь мог исправить вручную отредактировав discussion.txt и чтобы html получился актуальным

---

# spec_id: 3
## title: Поддержка генерации вопросов по обсуждению
## status: сделано
После шага коррекции добавим опциональный шаг создание вопросов. Пусть скрипт создаст файл с вопросами questions.txt и откроет его в subl (пример как открыть subl можно посмотреть в text_processors/illustrations_corrector.py)
Туда пользователь запишет свои вопросы и когда закроет subl скрипт сделает запрос к LLM модели (используем default модель), которой передаст тексты discussion.txt и qwestions.txt и в промпте попросит вернуть блок вопрос-ответ. (Как пример работы с LLM можно посмотреть text_processors/promo_description_processor.py)
Результат сохраним в answers.txt и откроем его в subl давая пользователю внести правки. 
Когда он будет закрыт, то продолжим выполнение скрипта дальше.
Блок вопрос-ответ должен начинаться со слов:
'---
Дальше мы поговорим с моделью <название LLM модели> и попросим ее ответить на вопросы, которые возникли во время чтения интервью.
## Ответы на вопросы из обсуждения
<ответ модели с блоком вопрос-ответ>
'

---

# spec_id: 2
## title: Поддержка выбора фрагментов
## status: сделано
В скрипте process_vd.sh надо добавить возможность создать обсуждение не только всего видео, но и заданного фрагмента. В конфиге process_vd.sh - configs/vd/example.conf есть параметры начала и конца фрагмента в формате hh:mm:ss.

---

# spec_id: 1 
## title: Transcript mode
## status: сделано
Есть скрипт process_vd.sh, который создает видео ролик с обсуждением из исходного видео. 

Надо добавить режим который пропустит скачивание видео и его транскрибацию, а будет использовать сразу transcript.txt, по которому надо подготовить обсуждение discussion.txt и далее все как в этом скрипте не меняя.

В конфиге для configs/vd/example.conf приведен параметр
USE_TRANSCRIPT_FILE="путь/к/transcript.txt" (текст по которому надо сделать обсуждение)
Если этот параметр задан, то использует новый режим.

