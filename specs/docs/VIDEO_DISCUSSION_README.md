# Video Discussion/Summary Generator

–ù–æ–≤—ã–π –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –ø–µ—Ä–µ—Å–∫–∞–∑–æ–≤ –∏–ª–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–π –≤–∏–¥–µ–æ —Å –≤–∏–¥–µ–æ—Ö–æ—Å—Ç–∏–Ω–≥–æ–≤ (YouTube, Rutube –∏ –¥—Ä.).

## –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- üì• **–°–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ** —Å YouTube, Rutube –∏ –¥—Ä—É–≥–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º —á–µ—Ä–µ–∑ yt-dlp
- üé§ **–¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è –∞—É–¥–∏–æ** —Å –ø–æ–º–æ—â—å—é Whisper (–ª–æ–∫–∞–ª—å–Ω–æ –∏–ª–∏ —á–µ—Ä–µ–∑ API)
- üìù **–°–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞** –Ω–∞ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ —Å –ø–æ–º–æ—â—å—é LLM
- üí≠ **–î–≤–∞ —Ä–µ–∂–∏–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∏**:
  - **Summary** - —Å–æ–∑–¥–∞–Ω–∏–µ –∫—Ä–∞—Ç–∫–æ–≥–æ –ø–µ—Ä–µ—Å–∫–∞–∑–∞
  - **Discussion** - –∞–Ω–∞–ª–∏–∑ –∏ –æ–±—Å—É–∂–¥–µ–Ω–∏–µ —Å —Ä–∞–∑–Ω—ã–º–∏ —Ç–æ—á–∫–∞–º–∏ –∑—Ä–µ–Ω–∏—è
- ‚úèÔ∏è **–ö–æ—Ä—Ä–µ–∫—Ç—É—Ä–∞ —Ç–µ–∫—Å—Ç–∞** —Å –ø–æ–º–æ—â—å—é LLM (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- üåê **–≠–∫—Å–ø–æ—Ä—Ç –≤ HTML** –¥–ª—è —É–¥–æ–±–Ω–æ–≥–æ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞
- üé¨ **–î–≤–∞ —Ä–µ–∂–∏–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –≤–∏–¥–µ–æ**:
  - **–°–ª–∞–π–¥—ã** - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π –∏ –≤–∏–¥–µ–æ –∏–∑ –Ω–∏—Ö
  - **–ò—Å—Ö–æ–¥–Ω–æ–µ –≤–∏–¥–µ–æ** - –æ–±—Ä–µ–∑–∫–∞/—É—Å–∫–æ—Ä–µ–Ω–∏–µ –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ —Å –Ω–æ–≤–æ–π –∞—É–¥–∏–æ –¥–æ—Ä–æ–∂–∫–æ–π

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞

1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
```bash
pip install -r requirements.txt
```

2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã —Å–∏—Å—Ç–µ–º–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:
- `ffmpeg` - –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ –∏ –∞—É–¥–∏–æ
- `yt-dlp` - –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ (—É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ pip)

## –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

1. –°–æ–∑–¥–∞–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–π —Ñ–∞–π–ª –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–∏–º–µ—Ä–∞:
```bash
cp configs/video_discussion/example.conf configs/video_discussion/my_video.conf
```

2. –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é:
```bash
# –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã
VIDEO_URL="https://www.youtube.com/watch?v=your_video_id"
BASE_DIR="pipeline_MyVideo"
TITLE="–ù–∞–∑–≤–∞–Ω–∏–µ –≤–∞—à–µ–≥–æ –≤–∏–¥–µ–æ"
AUTHOR="–ê–≤—Ç–æ—Ä –∫–∞–Ω–∞–ª–∞"
LANGUAGE="ru"  # –∏–ª–∏ "en", "de", etc.
MODE="summary"  # –∏–ª–∏ "discussion"
SEGMENTS_COUNT="10"
```

3. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä:
```bash
./process_video_discussion.sh configs/video_discussion/my_video.conf
```

### –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

#### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `VIDEO_URL` - URL –≤–∏–¥–µ–æ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è
- `BASE_DIR` - –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –¥–ª—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
- `TITLE` - –Ω–∞–∑–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ
- `LANGUAGE` - —è–∑—ã–∫ –¥–ª—è —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏ (ru, en, de, etc.)
- `MODE` - —Ä–µ–∂–∏–º –æ–±—Ä–∞–±–æ—Ç–∫–∏ (summary/discussion)
- `SEGMENTS_COUNT` - –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö —Å–µ–≥–º–µ–Ω—Ç–æ–≤

#### –ù–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã:
- `AUTHOR` - –∞–≤—Ç–æ—Ä –≤–∏–¥–µ–æ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "–ù–µ–∏–∑–≤–µ—Å—Ç–Ω—ã–π –∞–≤—Ç–æ—Ä")
- `USE_ORIGINAL_VIDEO` - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –∏—Å—Ö–æ–¥–Ω–æ–µ –≤–∏–¥–µ–æ (true/false, –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: false)
- `STYLE` - —Å—Ç–∏–ª—å –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: "–†–µ–∞–ª–∏—Å—Ç–∏—á–Ω—ã–π")
- `ERA`, `REGION`, `GENRE`, `SETTING` - –∫–æ–Ω—Ç–µ–∫—Å—Ç –¥–ª—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π
- `SECONDS_PER_ILLUSTRATION` - —Å–µ–∫—É–Ω–¥ –Ω–∞ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏—é (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é: 8)
- `MODEL_CHOICE` - –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ LLM (default/budget/quality)
- `VIDEO_STRATEGY` - —Å—Ç—Ä–∞—Ç–µ–≥–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ (cut/speed)

## –ü—Ä–æ—Ü–µ—Å—Å —Ä–∞–±–æ—Ç—ã

### 1. –°–∫–∞—á–∏–≤–∞–Ω–∏–µ –∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è
- –°–∫–∞—á–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ —Å —É–∫–∞–∑–∞–Ω–Ω–æ–≥–æ URL
- –ò–∑–≤–ª–µ–∫–∞–µ—Ç –∞—É–¥–∏–æ –¥–æ—Ä–æ–∂–∫—É
- –¢—Ä–∞–Ω—Å–∫—Ä–∏–±–∏—Ä—É–µ—Ç –∞—É–¥–∏–æ —Å –ø–æ–º–æ—â—å—é Whisper

### 2. –ê–Ω–∞–ª–∏–∑ –∏ —Å–µ–≥–º–µ–Ω—Ç–∞—Ü–∏—è
- –†–∞–∑–±–∏–≤–∞–µ—Ç —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—é –Ω–∞ —Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏
- –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –±–ª–æ–∫–æ–≤ –∑–∞–¥–∞–µ—Ç—Å—è –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–º `SEGMENTS_COUNT`

### 3. –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **–†–µ–∂–∏–º Summary**: —Å–æ–∑–¥–∞–µ—Ç –∫—Ä–∞—Ç–∫–∏–π –ø–µ—Ä–µ—Å–∫–∞–∑ –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞
- **–†–µ–∂–∏–º Discussion**: –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∫–∞–∂–¥—ã–π –±–ª–æ–∫, —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞–µ—Ç —Ä–∞–∑–Ω—ã–µ —Ç–æ—á–∫–∏ –∑—Ä–µ–Ω–∏—è

### 4. –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞
- –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –∫–æ—Ä—Ä–µ–∫—Ç—É—Ä–∞ —Ç–µ–∫—Å—Ç–∞
- –≠–∫—Å–ø–æ—Ä—Ç –≤ HTML —Ñ–æ—Ä–º–∞—Ç

### 5. –°–æ–∑–¥–∞–Ω–∏–µ –∞—É–¥–∏–æ
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–∑–¥–∞–µ—Ç –∞—É–¥–∏–æ —Ñ–∞–π–ª —Å –æ–∑–≤—É—á–∫–æ–π
- –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–∞–∫ `audio.mp3` –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞

### 6. –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ
- **–†–µ–∂–∏–º —Å–ª–∞–π–¥–æ–≤**: —Å–æ–∑–¥–∞–µ—Ç –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ –∏ –≤–∏–¥–µ–æ –∏–∑ –Ω–∏—Ö
- **–†–µ–∂–∏–º –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –≤–∏–¥–µ–æ**: –æ–±—Ä–µ–∑–∞–µ—Ç/—É—Å–∫–æ—Ä—è–µ—Ç –∏—Å—Ö–æ–¥–Ω–æ–µ –≤–∏–¥–µ–æ

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

```
BASE_DIR/
‚îú‚îÄ‚îÄ original_video.mp4      # –°–∫–∞—á–∞–Ω–Ω–æ–µ –≤–∏–¥–µ–æ
‚îú‚îÄ‚îÄ original_audio.mp3      # –ò–∑–≤–ª–µ—á–µ–Ω–Ω–æ–µ –∞—É–¥–∏–æ
‚îú‚îÄ‚îÄ transcript.txt          # –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è
‚îú‚îÄ‚îÄ transcript.json         # –¢—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏—è —Å —Ç–∞–π–º—Å—Ç–∞–º–ø–∞–º–∏
‚îú‚îÄ‚îÄ segments.json           # –¢–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ —Å–µ–≥–º–µ–Ω—Ç—ã
‚îú‚îÄ‚îÄ discussion.txt          # –ü–µ—Ä–µ—Å–∫–∞–∑/–æ–±—Å—É–∂–¥–µ–Ω–∏–µ (markdown)
‚îú‚îÄ‚îÄ discussion.html         # HTML –≤–µ—Ä—Å–∏—è
‚îú‚îÄ‚îÄ audio.mp3               # –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–æ–µ –∞—É–¥–∏–æ
‚îú‚îÄ‚îÄ images/                 # –ò–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–∏ (–µ—Å–ª–∏ —Ä–µ–∂–∏–º —Å–ª–∞–π–¥–æ–≤)
‚îú‚îÄ‚îÄ illustrations.json      # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π
‚îú‚îÄ‚îÄ bible.json              # –ë–∏–±–ª–∏—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π
‚îî‚îÄ‚îÄ video.mp4               # –§–∏–Ω–∞–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ
```

## –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –û–±—Ä–∞–∑–æ–≤–∞—Ç–µ–ª—å–Ω–æ–µ –≤–∏–¥–µ–æ
```bash
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –ª–µ–∫—Ü–∏–∏
VIDEO_URL="https://www.youtube.com/watch?v=lecture_id"
TITLE="–õ–µ–∫—Ü–∏—è –ø–æ —Ñ–∏–∑–∏–∫–µ"
MODE="summary"
SEGMENTS_COUNT="15"
USE_ORIGINAL_VIDEO="true"
```

### –ê–Ω–∞–ª–∏–∑ –¥–∏—Å–∫—É—Å—Å–∏–∏
```bash
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ –¥–∏—Å–∫—É—Å—Å–∏–∏
VIDEO_URL="https://www.youtube.com/watch?v=debate_id"
TITLE="–î–∏—Å–∫—É—Å—Å–∏—è –æ –±—É–¥—É—â–µ–º –ò–ò"
MODE="discussion"
SEGMENTS_COUNT="8"
USE_ORIGINAL_VIDEO="false"
STYLE="–°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π"
```

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã
- YouTube
- Rutube
- Vimeo
- –ò –¥—Ä—É–≥–∏–µ –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã, –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ yt-dlp

### –ú–æ–¥–µ–ª–∏ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- –õ–æ–∫–∞–ª—å–Ω—ã–π Whisper (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
- OpenAI Whisper API
- Hugging Face API
- OpenRouter API

### –°—Ç—Ä–∞—Ç–µ–≥–∏–∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤–∏–¥–µ–æ
- **Cut**: –ø—Ä–æ–ø–æ—Ä—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è –æ–±—Ä–µ–∑–∫–∞ –≤–∏–¥–µ–æ
- **Speed**: —É—Å–∫–æ—Ä–µ–Ω–∏–µ –≤–∏–¥–µ–æ –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¥–ª–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∞—É–¥–∏–æ

## –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

### –û—à–∏–±–∫–∞ —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –≤–∏–¥–µ–æ
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å yt-dlp: `yt-dlp --version`
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ URL –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π –∏ –≤–∏–¥–µ–æ –¥–æ—Å—Ç—É–ø–Ω–æ

### –û—à–∏–±–∫–∞ —Ç—Ä–∞–Ω—Å–∫—Ä–∏–ø—Ü–∏–∏
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∞—É–¥–∏–æ —Ñ–∞–π–ª–∞
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ Whisper —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω: `pip install openai-whisper`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ –≤ config.env

### –û—à–∏–±–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á–∏ OpenRouter –≤ config.env
- –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è images —Å–æ–∑–¥–∞–Ω–∞

## –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º–∏ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä–∞–º–∏

–ì–µ–Ω–µ—Ä–∞—Ç–æ—Ä –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Ç–µ –∂–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã, —á—Ç–æ –∏ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä—ã:
- `text_processors/correction_processor.py` - –∫–æ—Ä—Ä–µ–∫—Ç—É—Ä–∞
- `text_processors/markdown_to_html.py` - HTML —ç–∫—Å–ø–æ—Ä—Ç
- `video_processors/illustration_review_cli.py` - —Å–æ–∑–¥–∞–Ω–∏–µ –∏–ª–ª—é—Å—Ç—Ä–∞—Ü–∏–π
- `video_processors/video_generator.py` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–∏–¥–µ–æ –∏–∑ —Å–ª–∞–π–¥–æ–≤

–≠—Ç–æ –æ–±–µ—Å–ø–µ—á–∏–≤–∞–µ—Ç –∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –∏ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∫–æ–¥–∞.
